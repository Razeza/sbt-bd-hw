# Домашнее заание №1. MongoDB.
## Установка и загрузка данных.
С установкой СУБД локально на Windows не возникает никаких проблем.  
Я решил использовать датасет с данными покупателей для ТЦ, он предоставлялся в формате **csv**. В приложение компас предусмотрена загрузка файлов, которые представлены в формате **csv**.  

![csv usage](https://i.imgur.com/DKNgVux.png)

## Запросы на поиск.
Давайте попробуем найти людей в возрасте 19 лет:

![19 years old shell](https://i.imgur.com/DH1N0q4.png)
Тоже самое можно сделать и через графический интерфейс:

![19 years old interface](https://i.imgur.com/3DAMsvA.png)

Давайте попробуем сделать ~~сложный~~ составной запрос.
![compound](https://i.imgur.com/e1TMs0z.png)
Мы пытаемся подсчитать количество девочек 19 лет, что пожтверждает их количесвто в результате запроса find. (их всего 2 ~~, маловато~~).  
Так же мы нашли количество девушек - 112 и мужчие - 88.  
Это сходится с тем, что в дата сете было 200 объектов.

Давайте, попробуем что-то более интересное и поищем девушек от 18 до 24 лет включительно. Их оказалось 19 штук.
![range](https://i.imgur.com/50YRoo6.png)

## Индексы

Я в основном делал по возрасту, так что давайте создадим индекс на поле **Age**.  
Для начала заполним Базу данных большим количеством данных.  
И выполним запрос без индекса.

![without index](https://i.imgur.com/PiREAOJ.png)
Как мы видим из анализа запроса, нам пришлось пройтись по каждому документу и проверить его возраст.  
Тепеь давайте создадим индекс.

![create index](https://i.imgur.com/JH7BcOZ.png)
Теперь сделаем такой же запрос и проведём анализ запроса.

![with index](https://i.imgur.com/O9jNOVW.png)
Вау, отработало намного быстрее, как видно из запроса, нам не прошлось ходить по всем документам, ненужные сразу же отсеклись.

## Validation rules
Ну как-то несерьёзно было бы разрешать пользователю вставлять в пол какую-то неправильную инормацию, или в поле, где разрешины цифры от 1 до 100. Так что я решил немного разобраться, как писать валидационные правила.  

![gender rule](https://i.imgur.com/Er7hiTH.png)

Давайте проверим работают ли они.

![gender error](https://i.imgur.com/zr3ESFN.png)
![cost error](https://i.imgur.com/jtYjsQa.png)

Как мы видим, при попытке вставить неправильные данные в поля происходит ошибка. Отлично, застраховали пользователя и себя от неправильных данных!

